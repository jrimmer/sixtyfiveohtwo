<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slots - Lost Gonzo BBS</title>
    <link rel="stylesheet" href="/provinggrounds/css/terminal.css">
</head>
<body>
    <div class="terminal">
        <div class="ascii-box">
<pre>
===============================================================
                    SLOT MACHINE
                  Pull the Lever!
===============================================================
</pre>
        </div>

        <div class="stats">
            <div class="stat">
                <span class="stat-label">Your Gold:</span>
                <span class="stat-value"><%= Math.floor(user.gold).toLocaleString() %></span>
            </div>
        </div>

        <% if (result) { %>
        <div class="slot-display">
<pre>
+-------+-------+-------+
|       |       |       |
|  <%= result.reels[0] %>  |  <%= result.reels[1] %>  |  <%= result.reels[2] %>  |
|       |       |       |
+-------+-------+-------+
</pre>
        </div>

        <div class="message <%= result.winnings > 0 ? 'message-success' : 'message-error' %>">
            <% if (result.winnings > 0) { %>
            <p><%= result.message %></p>
            <p>You won <%= result.winnings.toLocaleString() %> gold!</p>
            <% } else { %>
            <p>No match. Try again!</p>
            <% } %>
        </div>
        <% } %>

        <h3>Payouts</h3>
        <table>
            <tr><td>7 7 7</td><td>100x bet</td></tr>
            <tr><td>$ $ $</td><td>50x bet</td></tr>
            <tr><td>* * *</td><td>20x bet</td></tr>
            <tr><td># # #</td><td>10x bet</td></tr>
            <tr><td>@ @ @</td><td>5x bet</td></tr>
            <tr><td>Any 2 match</td><td>2x bet</td></tr>
        </table>

        <form action="/tprobbs/games/slots/spin" method="POST">
            <div class="form-group">
                <label for="bet">Bet Amount (1-100):</label>
                <input type="number" id="bet" name="bet" min="1" max="100" value="<%= lastBet || 10 %>" required>
            </div>
            <button type="submit" class="link-button">Pull Lever!</button>
        </form>

        <div class="menu">
            <div class="menu-item">
                <span class="menu-key">B)</span>
                <a href="/tprobbs/games">Back to Casino</a>
            </div>
        </div>

        <div class="status-bar">
            <span>[<%= user.username %>]</span>
            <span>Level: <%= user.level %></span>
            <span>Gold: <%= Math.floor(user.gold).toLocaleString() %></span>
            <span>HP: <%= user.hit_points %>/<%= user.max_hp %></span>
            <span>Time: <%= user.timeRemaining %>m</span>
        </div>
    </div>
</body>
</html>
